<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
<title>Designation Management</title>

<link rel="shortcut icon" href="assets/img/favicon.png">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,500;0,600;0,700;1,400&amp;display=swap">

<link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">

<link rel="stylesheet" href="assets/plugins/fontawesome/css/fontawesome.min.css">
<link rel="stylesheet" href="assets/plugins/fontawesome/css/all.min.css">

<link rel="stylesheet" href="assets/css/style.css">

<link
href="https://cdn.jsdelivr.net/npm/bootstrap@5/dist/css/bootstrap.min.css"
rel="stylesheet"
integrity="..."
/>
<link
href="https://cdn.jsdelivr.net/npm/swiffy-slider@1.6.0/dist/css/swiffy-slider.min.css"
rel="stylesheet"
crossorigin="anonymous"
/>
<style>
  table, th, td {
      border: 1px solid #999;
      border-collapse: collapse;
      padding: 8px;
  }
  button {
      margin: 0 2px;
  }

  .modal {
      display: none;
      position: fixed;
      z-index: 99;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.4);
  }
  .modal-content {
      background-color: #fefefe;
      margin: 10% auto;
      padding: 20px;
      width: 300px;
      border-radius: 5px;
      position: relative;
  }
  .modal-content input {
      display: block;
      width: 100%;
      margin: 10px 0;
  }
  .close {
      color: #aaa;
      position: absolute;
      right: 10px;
      top: 5px;
      font-size: 20px;
      cursor: pointer;
  }

  /* Toast styling */
  #toast {
      visibility: hidden;
      min-width: 200px;
      background-color: #333;
      color: #fff;
      text-align: center;
      border-radius: 5px;
      padding: 10px;
      position: fixed;
      z-index: 100;
      left: 50%;
      bottom: 30px;
      transform: translateX(-50%);
      font-size: 14px;
  }

  #toast.show {
      visibility: visible;
      animation: fadein 0.5s, fadeout 0.5s 2.5s;
  }

  @keyframes fadein {
      from { bottom: 10px; opacity: 0; }
      to { bottom: 30px; opacity: 1; }
  }

  @keyframes fadeout {
      from { bottom: 30px; opacity: 1; }
      to { bottom: 10px; opacity: 0; }
  }
</style>


    <link rel="stylesheet" href="assets/css/style2.css" />
</head>
<body>

<div class="main-wrapper">

<div class="header">

<div style="display: flex; justify-content: center;" class="header-left">
<a href="index.html" class="logo">
<img src="assets/img/logoo.png" alt="Logo">
</a>
<a href="index.html" class="logo logo-small">
<img src="assets/img/logo-small.png" alt="Logo" width="30" height="30">
</a>
</div>

<a href="javascript:void(0);" id="toggle_btn">
<i class="fas fa-align-left"></i>
</a>

<div class="top-nav-search">
<form>
<input type="text" class="form-control" placeholder="Search here">
<button class="btn" type="submit"><i class="fas fa-search"></i></button>
</form>
</div>


<a class="mobile_btn" id="mobile_btn">
<i class="fas fa-bars"></i>
</a>


<ul class="nav user-menu">

<li class="nav-item dropdown noti-dropdown">
<a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
<i class="far fa-bell"></i> <span class="badge badge-pill">3</span>
</a>
<div class="dropdown-menu notifications">
<div class="topnav-dropdown-header">
<span class="notification-title">Notifications</span>
<a href="javascript:void(0)" class="clear-noti"> Clear All </a>
</div>
<div class="noti-content">
<ul class="notification-list">
<li class="notification-message">
<a href="#">
<div class="media">
<span class="avatar avatar-sm">
<img class="avatar-img rounded-circle" alt="User Image" src="assets/img/profiles/avatar-02.jpg">
</span>
<div class="media-body">
<p class="noti-details"><span class="noti-title">Carlson Tech</span> has approved <span class="noti-title">your estimate</span></p>
<p class="noti-time"><span class="notification-time">4 mins ago</span></p>
</div>
</div>
</a>
</li>
<li class="notification-message">
<a href="#">
<div class="media">
<span class="avatar avatar-sm">
<img class="avatar-img rounded-circle" alt="User Image" src="assets/img/profiles/avatar-11.jpg">
</span>
<div class="media-body">
<p class="noti-details"><span class="noti-title">International Software Inc</span> has sent you a invoice in the amount of <span class="noti-title">$218</span></p>
<p class="noti-time"><span class="notification-time">6 mins ago</span></p>
</div>
</div>
</a>
</li>
<li class="notification-message">
<a href="#">
<div class="media">
<span class="avatar avatar-sm">
<img class="avatar-img rounded-circle" alt="User Image" src="assets/img/profiles/avatar-17.jpg">
</span>
 <div class="media-body">
<p class="noti-details"><span class="noti-title">John Hendry</span> sent a cancellation request <span class="noti-title">Apple iPhone XR</span></p>
<p class="noti-time"><span class="notification-time">8 mins ago</span></p>
</div>
</div>
</a>
</li>
<li class="notification-message">
<a href="#">
<div class="media">
<span class="avatar avatar-sm">
<img class="avatar-img rounded-circle" alt="User Image" src="assets/img/profiles/avatar-13.jpg">
</span>
<div class="media-body">
<p class="noti-details"><span class="noti-title">Mercury Software Inc</span> added a new product <span class="noti-title">Apple MacBook Pro</span></p>
<p class="noti-time"><span class="notification-time">12 mins ago</span></p>
</div>
</div>
</a>
</li>
</ul>
</div>
<div class="topnav-dropdown-footer">
<a href="#">View all Notifications</a>
</div>
</div>
</li>


<li class="nav-item dropdown has-arrow">
<a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
    <span class="user-img"><img style="border: 2px solid #18AEFA; border-radius: 50%;padding: 2px;" class="rounded-circle " src="assets/img/profiles/rrr.png" width="31" alt="Ryan Taylor"></span>
</a>
<div class="dropdown-menu">
<div class="user-header">
<div class="avatar avatar-sm">
<img src="assets/img/profiles/rrr.png" alt="User Image" class="avatar-img rounded-circle">
</div>
<div class="user-text">
<!-- <h6>Ryan Taylor</h6>
<p class="text-muted mb-0">Administrator</p> -->
</div>
</div>
<a class="dropdown-item" href="profile.html">My Profile</a>
<a class="dropdown-item" href="inbox.html">Inbox</a>
<a class="dropdown-item" onclick="handlelogOut()" href="#">Logout</a>
</div>
</li>

</ul>

</div>


<div class="sidebar" id="sidebar">
<div class="sidebar-inner slimscroll">
<div id="sidebar-menu" class="sidebar-menu">
<ul>
<li class="menu-title">
<span>Main Menu</span>
</li>
<li class="submenu">
<a href="#"><i class="fas fa-user-graduate"></i> <span> Dashboard</span> <span class="menu-arrow"></span></a>
<ul>
<li><a href="index.html">Admin Dashboard</a></li>
<li><a href="teacher-dashboard.html">Doctor Dashboard</a></li>
<li><a href="student-dashboard.html">Accounts Dashboard</a></li>
</ul>
</li>
<li class="submenu active">
<a href="#"><i class="fas fa-user-graduate"></i> <span> Doctors</span> <span class="menu-arrow"></span></a>
<ul>
<li><a href="add-Doctors.html"  >Doctor List</a></li>
<li><a href="doctorsCard.html">Doctor View</a></li>
<li><a href="add-student.html">Doctor Add</a></li>
<li><a href="edit-student.html">Doctor Edit</a></li>
<li><a href="add_designation.html" class="active">Add designation</a></li>
<li><a href="add_specialization.html">Add specialization</a></li>
<li><a href="add_availableTime.html">Add availableTime</a></li>
</ul>
</li>
<li class="submenu ">
<a href="#"><i class="fas fa-chalkboard-teacher"></i> <span> Patients Appointments</span> <span class="menu-arrow"></span></a>
<ul>
<li><a href="add_appointment.html" >Add Appointment</a></li>
<li><a href="all_appointment.html">Appointment List</a></li>
<li><a href="teacher-details.html">Patients View</a></li>
<li><a href="add-teacher.html">Patients Add</a></li>
<li><a href="edit-teacher.html">Patients Edit</a></li>
</ul>
</li>
<li class="submenu">
<a href="#"><i class="fas fa-chalkboard-teacher"></i> <span> Patients </span> <span class="menu-arrow"></span></a>
<ul>
<li><a href="teachers.html">Patients List</a></li>
<li><a href="teacher-details.html">Patients View</a></li>
<li><a href="add-teacher.html">Patients Add</a></li>
<li><a href="edit-teacher.html">Patients Edit</a></li>
</ul>
</li>
<li class="submenu">
<a href="#"><i class="fas fa-building"></i> <span> Departments</span> <span class="menu-arrow"></span></a>
<ul>
<li><a href="departments.html">Department List</a></li>
<li><a href="add-department.html">Department Add</a></li>
<li><a href="edit-department.html">Department Edit</a></li>
</ul>
</li>
<li class="submenu">
<a href="#"><i class="fas fa-book-reader"></i> <span> Subjects</span> <span class="menu-arrow"></span></a>
<ul>
<li><a href="subjects.html">Subject List</a></li>
<li><a href="add-subject.html">Subject Add</a></li>
<li><a href="edit-subject.html">Subject Edit</a></li>
</ul>
</li>
<li class="menu-title">
<span>Management</span>
</li>
<li class="submenu">
<a href="#"><i class="fas fa-file-invoice-dollar"></i> <span> Accounts</span> <span class="menu-arrow"></span></a>
<ul>
<li><a href="accReceiveMoneyDoctor.html">Doctor Receive Money</a></li>
<li><a href="acc.html">Expenses & Income</a></li>
<li><a href="salary.html">Salary</a></li>
<li><a href="amountType.html" >Add Amount Types</a></li>
<li><a href="accountHead.html">Add Account Head</a></li>
<li><a href="accSingles.html">Add Account single</a></li>
<li><a href="add-expenses.html">Add Expenses</a></li>
<li><a href="add-salary.html">Add Salary</a></li>
</ul>
</li>
<li>
<a href="holiday.html"><i class="fas fa-holly-berry"></i> <span>Holiday</span></a>
</li>
<li>
<a href="fees.html"><i class="fas fa-comment-dollar"></i> <span>Fees</span></a>
</li>
<li>
<a href="exam.html"><i class="fas fa-clipboard-list"></i> <span>Exam list</span></a>
</li>
<li>
<a href="event.html"><i class="fas fa-calendar-day"></i> <span>Events</span></a>
</li>
<li>
<a href="time-table.html"><i class="fas fa-table"></i> <span>Time Table</span></a>
</li>
<li>
<a href="library.html"><i class="fas fa-book"></i> <span>Library</span></a>
</li>
<li class="menu-title">
<span>Pages</span>
</li>
<li class="submenu">
<a href="#"><i class="fas fa-shield-alt"></i> <span> Authentication </span> <span class="menu-arrow"></span></a>
<ul>
<li><a href="login.html">Login</a></li>
<li><a href="register.html">Register</a></li>
<li><a href="forgot-password.html">Forgot Password</a></li>
<li><a href="error-404.html">Error Page</a></li>
</ul>
</li>
<li>
<a href="blank-page.html"><i class="fas fa-file"></i> <span>Blank Page</span></a>
</li>
<li class="menu-title">
<span>Others</span>
</li>
<li>
<a href="sports.html"><i class="fas fa-baseball-ball"></i> <span>Sports</span></a>
</li>
<li>
<a href="hostel.html"><i class="fas fa-hotel"></i> <span>Hostel</span></a>
</li>
<li>
<a href="transport.html"><i class="fas fa-bus"></i> <span>Transport</span></a>
</li>
<li class="menu-title">
<span>UI Interface</span>
</li>
<li>
<a href="components.html"><i class="fas fa-vector-square"></i> <span>Components</span></a>
</li>
<li class="submenu">
<a href="#"><i class="fas fa-columns"></i> <span> Forms </span> <span class="menu-arrow"></span></a>
<ul>
<li><a href="form-basic-inputs.html">Basic Inputs </a></li>
<li><a href="form-input-groups.html">Input Groups </a></li>
<li><a href="form-horizontal.html">Horizontal Form </a></li>
<li><a href="form-vertical.html"> Vertical Form </a></li>
<li><a href="form-mask.html"> Form Mask </a></li>
<li><a href="form-validation.html"> Form Validation </a></li>
</ul>
</li>
<li class="submenu">
<a href="#"><i class="fas fa-table"></i> <span> Tables </span> <span class="menu-arrow"></span></a>
<ul>
<li><a href="tables-basic.html">Basic Tables </a></li>
<li><a href="data-tables.html">Data Table </a></li>
</ul>
</li>
<li class="submenu">
<a href="javascript:void(0);"><i class="fas fa-code"></i> <span>Multi Level</span> <span class="menu-arrow"></span></a>
<ul>
<li class="submenu">
<a href="javascript:void(0);"> <span>Level 1</span> <span class="menu-arrow"></span></a>
<ul>
<li><a href="javascript:void(0);"><span>Level 2</span></a></li>
<li class="submenu">
<a href="javascript:void(0);"> <span> Level 2</span> <span class="menu-arrow"></span></a>
<ul>
<li><a href="javascript:void(0);">Level 3</a></li>
<li><a href="javascript:void(0);">Level 3</a></li>
</ul>
</li>
<li><a href="javascript:void(0);"> <span>Level 2</span></a></li>
</ul>
</li>
<li>
<a href="javascript:void(0);"> <span>Level 1</span></a>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>


<div class="page-wrapper">
<div class="content container-fluid mt-5">

<div class="page-header">
<div class="row align-items-center">
<div class="col">
<h3 class="page-title">Add Designation</h3>
<ul class="breadcrumb">
<li class="breadcrumb-item"><a href="add_appointment.html">Designation</a></li>
<li class="breadcrumb-item active">Add Designation</li>
</ul>
</div>
</div>
</div>

<div class="row">
<div class="col-sm-12">
<div class="card">
<div class="card-body">

<div class="row">
<div class="col-12">
<!-- <h5 class="form-title"><span>Event Information</span></h5> -->
</div>
<div class="container pb-4">
  <div class="row justify-content-center m-auto ">
    <div class="row d-flex justify-content-center px-5">
        <div class="col-lg-6">
            <h2 class="pb-4">Add Designation</h2>
            <form id="designationForm">
                <input type="text" id="name" class="p-2 rounded" placeholder="Designation Name" required><br><br>
                <input style="display: none;" type="text" id="slug" class="p-2 rounded" placeholder="Slug" required>
                <button class="btn btcn" type="submit">Add</button>
            </form>
        </div>
        <div class="col-lg-5">
            <h2 class="pb-4">Designation List</h2>
            <table class="">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <!-- <th>Slug</th> -->
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="designationTableBody"></tbody>
            </table>
        </div>
    </div>

    
    <!-- Toast -->
    <div id="toast"></div>
    
    <!-- Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h3>Edit Designation</h3>
            <input type="text" id="editName" placeholder="Designation Name">
            <input type="text" id="editSlug" placeholder="Slug">
            <button onclick="saveEdit()">Save Changes</button>
        </div>
    </div>
      
      
  </div>

      
    

</div>

    
</div>
</div>
</div>
</div>
</div>
</div>

</div>


<script src="assets/js/jquery-3.6.0.min.js"></script>

<script src="assets/js/popper.min.js"></script>
<script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>

<script src="assets/plugins/slimscroll/jquery.slimscroll.min.js"></script>

<script src="assets/js/script.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  const apiUrl = 'http://127.0.0.1:8000/doctor/designation/';
  let currentEditId = null;

  function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.className = "show";
      setTimeout(() => {
          toast.className = toast.className.replace("show", "");
      }, 3000);
  }

  function fetchDesignations() {
      fetch(apiUrl)
          .then(res => res.json())
          .then(data => {
              const tbody = document.getElementById('designationTableBody');
              tbody.innerHTML = '';
              data.forEach(item => {
                  const row = document.createElement('tr');
                  row.innerHTML = `
                      <td>${item.id}</td>
                      <td>${item.name}</td>
                      
                      <td>
                          <button class="btn btn-sm btcn"  onclick="openModal(${item.id}, '${item.name}', '${item.slug}')">Edit</button>
                          <button class="btn btn-sm btc" onclick="deleteDesignation(${item.id})">Delete</button>
                      </td>
                  `;
                  tbody.appendChild(row);
              });
          });
  }
//   <td>${item.slug}</td>
  

  document.getElementById('name').addEventListener('input', function () {
      const slug = this.value.toLowerCase().replace(/\s+/g, '-');
      document.getElementById('slug').value = slug;
  });

  document.getElementById('designationForm').addEventListener('submit', function (e) {
      e.preventDefault();
      const name = document.getElementById('name').value;
      const slug = document.getElementById('slug').value;

      fetch(apiUrl, {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json'
          },
          body: JSON.stringify({ name, slug })
      })
      .then(response => {
          if (response.ok) {
              showToast("Designation added successfully!");
              fetchDesignations();
              this.reset();
          } else {
              showToast("Failed to add designation.");
          }
      });
  });

  function openModal(id, name, slug) {
      currentEditId = id;
      document.getElementById('editName').value = name;
      document.getElementById('editSlug').value = slug;
      document.getElementById('editModal').style.display = 'block';
  }

  document.getElementById('editName').addEventListener('input', function () {
      const slug = this.value.toLowerCase().replace(/\s+/g, '-');
      document.getElementById('editSlug').value = slug;
  });

  function closeModal() {
      document.getElementById('editModal').style.display = 'none';
  }

  function saveEdit() {
      const name = document.getElementById('editName').value.trim();
      const slug = document.getElementById('editSlug').value.trim();

      if (!name || !slug) return;

      fetch(`${apiUrl}${currentEditId}/`, {
          method: 'PUT',
          headers: {
              'Content-Type': 'application/json'
          },
          body: JSON.stringify({ name, slug })
      }).then(response => {
          if (response.ok) {
              showToast("Designation updated successfully!");
              closeModal();
              fetchDesignations();
          } else {
              showToast("Failed to update designation.");
          }
      });
  }

  function deleteDesignation(id) {
      const confirmation = confirm("Are you sure you want to delete this designation?");
      if (confirmation) {
          fetch(`${apiUrl}${id}/`, {
              method: 'DELETE'
          }).then(response => {
              if (response.ok) {
                  showToast("Designation deleted successfully!");
                  fetchDesignations();
              } else {
                  showToast("Failed to delete designation.");
              }
          });
      }
  }

  window.onclick = function(event) {
      const modal = document.getElementById('editModal');
      if (event.target == modal) {
          closeModal();
      }
  }

  fetchDesignations();
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.js"></script>

<script src="./logout.js"></script>
<script
src="https://cdn.jsdelivr.net/npm/bootstrap@5/dist/js/bootstrap.bundle.min.js"
integrity="..."
></script>
<script
src="https://cdn.jsdelivr.net/npm/swiffy-slider@1.6.0/dist/js/swiffy-slider.min.js"
crossorigin="anonymous"
defer
></script>
</body>

<!-- Mirrored from preschool.dreamguystech.com/html-template/add-events.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 28 Oct 2021 11:12:21 GMT -->
</html>